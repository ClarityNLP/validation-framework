@(title: String)(subtitle: String)

@main(title) {
  <div ng-controller="searchController" class="ng-cloak">
	  <div class="well">
	    <h4>Explore</h4>
	    <p>@subtitle</p>
	  </div>
	  <div class="container">
	  	<div class="row">
	  		<div class="col-xs-12 col-md-3">
	  			<h5>
	  			Search:
	  			</h5>
	  			<div>
	  				<input class="form-control" type="text" placeholder="Query..." ng-model="searchInput" ng-keypress="($event.which === 13)?doSearch():0" autofocus/>
	  			</div>
	  			<div style="padding-top:10px">
	  				<a class="btn btn-default" ng-click="doSearch(false)">Search Documents</a>
	  			</div>
	  			<div style="padding-top:50px" ng-show="searched">
	  				<h4><b>{{documentsSize}}</b> documents</h4>
	  				<h4><b>{{subjects.length}}</b> patients</h4>
	  			</div>
	  		</div>
	  		<div class="col-xs-12 col-md-9" ng-show="searched">
		  			  <ul id="resultTabs" class="nav nav-tabs" role="tablist" >
					    <li role="presentation" class="active"><a href="#results" aria-controls="results" role="tab" data-toggle="tab">Results</a></li>
					    <li role="presentation"><a href="#reports" aria-controls="reports" role="tab" data-toggle="tab">Reports</a></li>
					  </ul>
			  			 <div class="tab-content">
						    <div role="tabpanel" class="tab-pane active" id="results">
						    <table class="table table-striped table-hover ">
		                <thead>
		                  <tr>
		                    <th>Document</th>
		                    <th>Patient</th>
		                    <th style="min-width: 90px;">Date</th>
		                    <th>Age</th>
		                    <th>Gender</th>
		                    <th>Snippet</th>
		                  </tr>
		                </thead>
		                <tbody>
		                  <tr ng-repeat="doc in currentDocuments">
		                   	<td style="vertical-align:top"><span class="h5"><a ng-click="showDoc(doc)" style="cursor:pointer">{{doc.reportId}}</a></span></td>
		                   	<td style="vertical-align:top"><span class="h5">{{doc.subject}}</span></td>
		                   	<td style="vertical-align:top"><span>{{doc.reportDate}}</span></td>
		                   	<td style="vertical-align:top"><span class="h5"></span></td>
		                   	<td style="vertical-align:top"><span class="h5"></span></td>
		                   	<td style="vertical-align:top"><span class="h5" ng-bind-html="doc.snippet"></td></td>
		                  </tr>
		                </tbody>
		              </table>
		              <ul uib-pagination 
		              	total-items="documentsSize" 
		              	ng-model="currentPage" 
		              	max-size="maxSize" 
		              	class="pagination-md" 
		              	boundary-links="true" 
		              	ng-change="pageChanged()"
		              	rotate="false"></ul>
		            </div>
				    <div role="tabpanel" class="tab-pane" id="reports">
				    	<div ng-if="activeDocument.reportText && activeDocument.reportText.length > 0">
					    	<pre style="margin-top:15px">
					    		{{activeDocument.reportText}}
					    	</pre>
				    	</div>
				    	<div ng-if="!activeDocument.reportText || activeDocument.reportText.length === 0">
				    		<h4>Please select a document.</h4>
				    	</div>
				    </div>
				  </div>
	  		</div>
	  	</div>
	  </div>
  </div>
}